<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_email">
    <sys_script_email action="INSERT_OR_UPDATE">
        <name>AP_InformAdminOnRequestRaised</name>
        <new_lines_to_html>true</new_lines_to_html>
        <script><![CDATA[(function runMailScript( /* GlideRecord */ current, /* TemplatePrinter */ template,
    /* Optional EmailOutbound */
    email, /* Optional GlideRecord */ email_action,
    /* Optional GlideRecord */
    event) {

    var scriptName = "MailScript-InformAdminOnRequestRaised: ";
    var br = "<br>";
    // Add your code here
    gs.info(scriptName + "Entered");
    var details = JSON.parse(event.parm2);
    var userInfo = details.userInfo;
    var adminMailList = details.adminMailList;

    gs.info(scriptName + "Parsing event data...");
    // Add your code here
    var sub, body, content, header = 'Hi,' + br + br,
        footer = br + br + 'Thanks & Regards,' + br + 'ServiceNow';

    gs.info(scriptName + "Fetched the required info from event");
    sub = 'AutomationAnywhere Access Request Notification';
    content = "A request is raised for Automation Anywhere access." + br + br + "<b>Requester Details:</b>" + br;
    content += "<b>XUID / MUID:</b> " + userInfo.uid + br;
    content += "<b>Name:</b> " + userInfo.name + br;
    content += "<b>Environment:</b> " + userInfo.environment + br;
    body = header + content + footer;
    email.setSubject(sub);
    email.setBody(body);
    //email.addAddress("cc","yashwanth1ga16cs184@gmail.com","Yashwanth");
    adminMailList.forEach((user, index) => {
		gs.info("Name: "+user.name+"; Mail: "+user.mail);
        email.addAddress('cc', user.mail, user.name);
        email.addAddress('bcc', user.mail, user.name);
    });
    //email.send();
    gs.info(scriptName + "Mail sent");

})(current, template, email, email_action, event);]]></script>
        <sys_class_name>sys_script_email</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-12-19 13:09:25</sys_created_on>
        <sys_id>d6f776c81c1731107f44d85edddcec73</sys_id>
        <sys_name>AP_InformAdminOnRequestRaised</sys_name>
        <sys_package display_value="AccessProvider" source="x_snc_accessprov_0">45a6ae6e381631107f4403cbe8102e24</sys_package>
        <sys_policy/>
        <sys_scope display_value="AccessProvider">45a6ae6e381631107f4403cbe8102e24</sys_scope>
        <sys_update_name>sys_script_email_d6f776c81c1731107f44d85edddcec73</sys_update_name>
    </sys_script_email>
</record_update>
